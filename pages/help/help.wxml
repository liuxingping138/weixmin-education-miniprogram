<!--pages/help/help.wxml - 使用帮助页面-->
<view class="container">
  <!-- 页面标题 -->
  <view class="page-header">
    <t-icon name="help-circle" size="64rpx" color="#0052d9" />
    <view class="header-text">
      <text class="page-title">使用帮助</text>
      <text class="page-subtitle">快速上手智慧教育小程序</text>
    </view>
  </view>

  <!-- 标签页 -->
  <t-tabs value="{{currentTab}}" bind:change="onTabChange" sticky>
    <t-tab-panel label="使用指南" value="0">
      <view class="tab-content">
        <!-- 帮助内容 -->
        <view wx:for="{{helpSections[userType]}}" wx:key="id" class="help-section">
          <view class="section-header">
            <t-icon name="{{item.icon}}" size="40rpx" color="#0052d9" />
            <text class="section-title">{{item.title}}</text>
          </view>
          
          <view wx:for="{{item.items}}" wx:for-item="helpItem" wx:key="title" class="help-item">
            <view class="help-title">{{helpItem.title}}</view>
            <view class="help-content">{{helpItem.content}}</view>
            
            <view wx:if="{{helpItem.steps}}" class="help-steps">
              <view wx:for="{{helpItem.steps}}" wx:for-item="step" wx:key="*this" class="step-item">
                <view class="step-number">{{index + 1}}</view>
                <text class="step-text">{{step}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </t-tab-panel>
    
    <t-tab-panel label="常见问题" value="1">
      <view class="tab-content">
        <view class="faq-list">
          <view 
            wx:for="{{faqList}}" 
            wx:key="question" 
            class="faq-item {{item.expanded ? 'expanded' : ''}}"
            bindtap="toggleFAQ"
            data-index="{{index}}"
          >
            <view class="faq-question">
              <t-icon name="help-circle" size="32rpx" color="#0052d9" />
              <text class="question-text">{{item.question}}</text>
              <t-icon 
                name="{{item.expanded ? 'chevron-up' : 'chevron-down'}}" 
                size="32rpx" 
                color="#999"
              />
            </view>
            
            <view wx:if="{{item.expanded}}" class="faq-answer">
              <text>{{item.answer}}</text>
            </view>
          </view>
        </view>
      </view>
    </t-tab-panel>
    
    <t-tab-panel label="联系我们" value="2">
      <view class="tab-content">
        <view class="contact-section">
          <view class="contact-header">
            <t-icon name="service" size="64rpx" color="#0052d9" />
            <view class="contact-title">
              <text class="title">联系客服</text>
              <text class="subtitle">我们随时为您提供帮助</text>
            </view>
          </view>
          
          <view class="contact-list">
            <view class="contact-item" bindtap="makeCall">
              <view class="contact-info">
                <t-icon name="call" size="40rpx" color="#52c41a" />
                <view class="contact-text">
                  <text class="contact-label">客服电话</text>
                  <text class="contact-value">{{contactInfo.phone}}</text>
                </view>
              </view>
              <t-icon name="chevron-right" size="32rpx" color="#999" />
            </view>
            
            <view class="contact-item" bindtap="copyContact" data-type="email">
              <view class="contact-info">
                <t-icon name="mail" size="40rpx" color="#1890ff" />
                <view class="contact-text">
                  <text class="contact-label">邮箱地址</text>
                  <text class="contact-value">{{contactInfo.email}}</text>
                </view>
              </view>
              <t-icon name="copy" size="32rpx" color="#999" />
            </view>
            
            <view class="contact-item" bindtap="copyContact" data-type="wechat">
              <view class="contact-info">
                <t-icon name="logo-wechat" size="40rpx" color="#52c41a" />
                <view class="contact-text">
                  <text class="contact-label">微信客服</text>
                  <text class="contact-value">{{contactInfo.wechat}}</text>
                </view>
              </view>
              <t-icon name="copy" size="32rpx" color="#999" />
            </view>
            
            <view class="contact-item">
              <view class="contact-info">
                <t-icon name="time" size="40rpx" color="#faad14" />
                <view class="contact-text">
                  <text class="contact-label">服务时间</text>
                  <text class="contact-value">{{contactInfo.workTime}}</text>
                </view>
              </view>
            </view>
          </view>
          
          <view class="contact-actions">
            <t-button theme="light" size="large" bind:tap="submitFeedback">
              <t-icon name="chat" />
              意见反馈
            </t-button>
            <t-button theme="light" size="large" bind:tap="viewChangelog">
              <t-icon name="file-text" />
              更新日志
            </t-button>
          </view>
        </view>
      </view>
    </t-tab-panel>
  </t-tabs>
</view>