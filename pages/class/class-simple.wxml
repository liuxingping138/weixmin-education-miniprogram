<!--pages/class/class-simple.wxml - 简化版班级管理-->
<view class="container">
  <!-- 班级信息卡片 -->
  <view class="class-header">
    <view class="class-info">
      <view class="class-name">{{classInfo.name}}</view>
      <view class="class-meta">
        <text class="teacher-name">{{classInfo.teacherName}}</text>
        <text class="student-count">{{classInfo.studentCount}}名学生</text>
      </view>
    </view>
    
    <view class="search-btn" bindtap="toggleSearch">
      <t-icon name="search" size="40rpx" color="#667eea"></t-icon>
    </view>
  </view>

  <!-- 搜索框 -->
  <view class="search-bar" wx:if="{{showSearch}}">
    <input 
      class="search-input" 
      placeholder="搜索学生姓名或学号"
      value="{{searchKeyword}}"
      bindinput="onSearchInput"
      focus="{{showSearch}}"
    />
  </view>

  <!-- 快速统计 -->
  <view class="quick-stats">
    <view class="stat-item">
      <text class="stat-value">{{quickStats.onlineStudents}}/{{quickStats.totalStudents}}</text>
      <text class="stat-label">在线学生</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{classInfo.completionRate}}%</text>
      <text class="stat-label">作业完成率</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{classInfo.avgScore}}</text>
      <text class="stat-label">平均分</text>
    </view>
  </view>

  <!-- 快速操作 -->
  <view class="quick-actions">
    <view class="action-item" data-action="homework" bindtap="quickAction">
      <view class="action-icon homework">
        <t-icon name="edit" size="40rpx" color="#fff"></t-icon>
      </view>
      <text class="action-text">布置作业</text>
    </view>
    <view class="action-item" data-action="attendance" bindtap="quickAction">
      <view class="action-icon attendance">
        <t-icon name="check-circle" size="40rpx" color="#fff"></t-icon>
      </view>
      <text class="action-text">考勤管理</text>
    </view>
    <view class="action-item" data-action="message" bindtap="quickAction">
      <view class="action-icon message">
        <t-icon name="chat" size="40rpx" color="#fff"></t-icon>
      </view>
      <text class="action-text">发送通知</text>
    </view>
    <view class="action-item" data-action="report" bindtap="quickAction">
      <view class="action-icon report">
        <t-icon name="chart" size="40rpx" color="#fff"></t-icon>
      </view>
      <text class="action-text">学习报告</text>
    </view>
  </view>

  <!-- 学生列表 -->
  <view class="student-section">
    <view class="section-header">
      <text class="section-title">学生列表</text>
      <text class="section-count">{{filteredStudents.length}}人</text>
    </view>
    
    <view class="student-list">
      <view 
        class="student-item" 
        wx:for="{{filteredStudents}}" 
        wx:key="id"
        data-student="{{item}}"
        bindtap="onStudentTap"
      >
        <view class="student-avatar">
          <image src="{{item.avatar}}" mode="aspectFill" />
          <view class="online-status {{item.isOnline ? 'online' : 'offline'}}"></view>
        </view>
        
        <view class="student-info">
          <view class="student-name">{{item.name}}</view>
          <view class="student-meta">
            <text class="student-number">{{item.studentNumber}}</text>
            <text class="last-active">{{item.lastActive}}</text>
          </view>
        </view>
        
        <view class="student-stats">
          <view class="homework-status">
            <text class="completed">{{item.completedHomework}}</text>
            <text class="total">/{{item.todayHomework}}</text>
          </view>
          <text class="avg-score">{{item.avgScore}}分</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 最近活动 -->
  <view class="activity-section">
    <view class="section-header">
      <text class="section-title">最近活动</text>
      <text class="more-link" bindtap="viewMoreActivities">查看更多</text>
    </view>
    
    <view class="activity-list">
      <view class="activity-item" wx:for="{{recentActivities}}" wx:key="id">
        <view class="activity-icon">{{item.icon}}</view>
        <view class="activity-content">
          <text class="activity-text">{{item.content}}</text>
          <text class="activity-time">{{item.time}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- 学生操作弹窗 -->
<view class="student-actions-overlay" wx:if="{{showStudentActions}}" bindtap="closeStudentActions">
  <view class="student-actions" catchtap="">
    <view class="actions-header">
      <text class="student-name">{{selectedStudent.name}}</text>
      <view class="close-btn" bindtap="closeStudentActions">
        <t-icon name="close" size="32rpx" color="#999"></t-icon>
      </view>
    </view>
    
    <view class="actions-list">
      <view class="action-btn" bindtap="viewStudentDetail">
        <t-icon name="user" size="32rpx" color="#667eea"></t-icon>
        <text>查看详情</text>
      </view>
      <view class="action-btn" bindtap="contactParent">
        <t-icon name="phone" size="32rpx" color="#4facfe"></t-icon>
        <text>联系家长</text>
      </view>
      <view class="action-btn" bindtap="rewardStudent">
        <t-icon name="star" size="32rpx" color="#43e97b"></t-icon>
        <text>奖励学生</text>
      </view>
    </view>
  </view>
</view>

<!-- 加载状态 -->
<view class="loading-overlay" wx:if="{{loading}}">
  <view class="loading-content">
    <t-icon name="loading" size="60rpx" color="#667eea"></t-icon>
    <text class="loading-text">加载中...</text>
  </view>
</view>